---
id: account
title: 账号相关
---
账号相关功能包括注册、登录、忘记密码、修改密码等，是每个系统必有的功能。从业务角度来看非常简单，但在技术层面却有很多细节。

## 注册
---
- 支持 `手机号`、`邮箱` 2 种账号注册方式（_有海外使用者时邮箱账号会特别有用_）。
- `手机号`账号有效性验证：将令牌以短信形式发送至手机。
- `邮箱`账号有效性验证：将令牌以邮件形式发送至邮箱。
- 令牌规则策略：6 位数字；令牌有效期限： 10 分钟。
- 密码强度策略：至少1个大写字母、1个小写字母、1个数字、8个字符；提供密码强度提示；
- 防止恶意尝试：发送短信、邮件需输入`图形验证码`。
- `图形验证码`规则策略：4 位字母数字，字母不区分大小写。
> 令牌策略、密码强度策略、图形验证码策略可在系统设置中修改，上述为官方推荐设置

## 登录
---
- 支持 2 种登录方式：`账号 + 密码` / `账号 + 短信`。
- 限制登录失败次数：登录失败超过 3 次提示输入`图形验证码`。
- 防止恶意尝试：短信登录需输入`图形验证码`。

## 忘记密码
---
忘记密码流程尚未有工业标准，框架提供一个通用模型，共 5 步。
- 第一步：搜集用户识别身份数据：填写手机号、邮箱地址；
- 第二步：校验安全问题（本框架中省略）；
- 第三步：发送令牌（为了防止恶意尝试，需要有图形验证码）；
- 第四步：修改密码（令牌 + 新密码）；
- 第五步：记录日志。

需要注意的是把所有的步骤放在一个画面中实现不是一个好的想法，你会发现逻辑难以控制且存在漏洞。

## 个人中心
---
### 个人信息修改
- 头像修改；头像显示缩略图，点击现实原图。
- 姓名、性别、生日、联系电话、住址修改。
> 图片的剪切策略可在 [CodingEX](http://CodingEX.net) 找到相关描述。

### 解绑
邮箱和手机号均可以在个人中心完成解绑和再绑定。
- 邮箱和手机号至少存在一个
- 
- 

### 修改密码
修改密码是用户在登录状态下的操作，后台逻辑要确保对授权 Token 有效性的检验。
- 新密码不能和原密码一致
- 密码强度策略：至少1个大写字母、1个小写字母、1个数字、8个字符；提供密码强度提示；
